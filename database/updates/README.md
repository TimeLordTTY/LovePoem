# 数据库更新脚本说明

本目录包含所有数据库的增量更新脚本，用于将现有数据库升级到最新版本。

## 使用方法

1. **全新部署**：直接执行 `schema.sql` 和 `init_data.sql`
2. **现有系统升级**：按顺序执行 `updates/` 目录下的脚本

## 脚本命名规则

```
{序号}_{功能描述}.sql
```

例如：
- `001_add_admin_features.sql` - 添加管理功能
- `002_update_user_table.sql` - 更新用户表结构

## 更新记录

| 脚本文件 | 执行日期 | 描述 | 状态 |
|---------|---------|------|------|
| 001_add_admin_features.sql | 2025-09-18 | 添加管理功能相关的数据库变更 | ✅ 已完成 |

## 注意事项

1. **执行顺序**：必须按照文件名的序号顺序执行
2. **备份数据**：执行前请备份数据库
3. **测试环境**：建议先在测试环境执行
4. **回滚准备**：每个脚本都应该考虑回滚方案
5. **重复执行**：脚本应该支持重复执行（幂等性）

## 脚本模板

```sql
-- 数据库增量更新脚本 {序号}: {描述}
-- 执行日期: YYYY-MM-DD
-- 描述: {详细描述}

USE poem;

-- 1. 检查前置条件
-- 2. 执行变更
-- 3. 验证结果
-- 4. 输出完成信息

SELECT '{脚本名} 执行完成' as message;
```

## 回滚说明

如果需要回滚某个更新，请：
1. 停止应用服务
2. 恢复数据库备份
3. 重新执行到目标版本的脚本
4. 重启应用服务


